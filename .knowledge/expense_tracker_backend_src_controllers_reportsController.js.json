{"is_source_file": true, "format": "JavaScript", "description": "This file is a JavaScript controller module for handling report-related API endpoints in a backend application. It defines functions to generate expenditure summaries by category, income versus expense comparisons over a specified period, and a placeholder for alerting functionalities.", "external_files": ["../db/pg.js", "../models/queries.js"], "external_methods": ["query"], "published": ["spendingByCategory", "incomeVsExpense", "listAlerts"], "classes": [], "methods": [{"name": "coerceRange(r)", "description": "Helper function to normalize and validate the 'range' query parameter ('month', 'quarter', or '3months').", "scope": "", "scopeKind": ""}, {"name": "isValidDateStr(s)", "description": "Validates if a string matches the 'YYYY-MM-DD' date format.", "scope": "", "scopeKind": ""}, {"name": "buildDateWhere({ range, from, to })", "description": "Constructs SQL WHERE clause and parameters based on provided date range and from/to filters.", "scope": "", "scopeKind": ""}, {"name": "spendingByCategory(req, res, next)", "description": "API endpoint that returns total expenses grouped by category within a specified date range, normalizing amounts as positives.", "scope": "", "scopeKind": ""}, {"name": "incomeVsExpense(req, res, next)", "description": "API endpoint that provides a monthly comparison of income, expenses, and net balance over a specified period.", "scope": "", "scopeKind": ""}, {"name": "listAlerts(_req, res, _next)", "description": "Placeholder API endpoint for listing alerts; currently returns an empty list.", "scope": "", "scopeKind": ""}], "calls": ["query"], "search-terms": ["reportsController", "spendingByCategory", "incomeVsExpense", "date_trunc", "transaction_date", "category_id", "transactions", "categories", "period", "alerts"], "state": 2, "file_id": 40, "knowledge_revision": 113, "git_revision": "45a524a7718fe2bf909ed265001203453fc3a31c", "revision_history": [{"86": ""}, {"107": "609e630e6614cd592feafb55ea5fd382675844cc"}, {"113": "45a524a7718fe2bf909ed265001203453fc3a31c"}], "ctags": [{"_type": "tag", "name": "buildDateWhere", "path": "/home/kavia/workspace/code-generation/smart-expense-tracker-4468-4477/expense_tracker_backend/src/controllers/reportsController.js", "pattern": "/^function buildDateWhere({ range, from, to }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ range, from, to })"}, {"_type": "tag", "name": "coerceRange", "path": "/home/kavia/workspace/code-generation/smart-expense-tracker-4468-4477/expense_tracker_backend/src/controllers/reportsController.js", "pattern": "/^function coerceRange(r) {$/", "language": "JavaScript", "kind": "function", "signature": "(r)"}, {"_type": "tag", "name": "incomeVsExpense", "path": "/home/kavia/workspace/code-generation/smart-expense-tracker-4468-4477/expense_tracker_backend/src/controllers/reportsController.js", "pattern": "/^export async function incomeVsExpense(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}, {"_type": "tag", "name": "isValidDateStr", "path": "/home/kavia/workspace/code-generation/smart-expense-tracker-4468-4477/expense_tracker_backend/src/controllers/reportsController.js", "pattern": "/^function isValidDateStr(s) {$/", "language": "JavaScript", "kind": "function", "signature": "(s)"}, {"_type": "tag", "name": "listAlerts", "path": "/home/kavia/workspace/code-generation/smart-expense-tracker-4468-4477/expense_tracker_backend/src/controllers/reportsController.js", "pattern": "/^export async function listAlerts(_req, res, _next) {$/", "language": "JavaScript", "kind": "function", "signature": "(_req, res, _next)"}, {"_type": "tag", "name": "spendingByCategory", "path": "/home/kavia/workspace/code-generation/smart-expense-tracker-4468-4477/expense_tracker_backend/src/controllers/reportsController.js", "pattern": "/^export async function spendingByCategory(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}], "hash": "1370a3b72cbf07f97800ddb71944007c", "format-version": 4, "code-base-name": "expense_tracker_frontend", "filename": "expense_tracker_backend/src/controllers/reportsController.js"}